<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/products"></ion-back-button>
    </ion-buttons>
    <ion-title>{{ isEditMode ? 'Editar Producto' : 'Nuevo Producto' }}</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="onSubmit()" [disabled]="!productForm.valid">
        <ion-icon name="save" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <form [formGroup]="productForm" (ngSubmit)="onSubmit()">
    <ion-list>
      <!-- Campo Nombre -->
      <ion-item>
        <ion-label position="floating">Nombre del Producto</ion-label>
        <ion-input formControlName="name" type="text"></ion-input>
      </ion-item>

      <!-- Campo Descripción -->
      <ion-item>
        <ion-label position="floating">Descripción</ion-label>
        <ion-textarea formControlName="description" rows="4"></ion-textarea>
      </ion-item>

      <!-- Campos de Precio y Período -->
      <ion-item>
        <ion-label position="floating">Precio por día</ion-label>
        <ion-input formControlName="price" type="number"></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="floating">Período mínimo (días)</ion-label>
        <ion-input formControlName="rentalPeriod" type="number"></ion-input>
      </ion-item>

      <!-- Campo Categoría -->
      <ion-item>
        <ion-label>Categoría</ion-label>
        <ion-select formControlName="category">
          <ion-select-option value="herramientas">Herramientas</ion-select-option>
          <ion-select-option value="electrodomesticos">Electrodomésticos</ion-select-option>
          <ion-select-option value="vehiculos">Vehículos</ion-select-option>
          <ion-select-option value="otros">Otros</ion-select-option>
        </ion-select>
      </ion-item>

      <!-- Campo Disponibilidad -->
      <ion-item>
        <ion-label>Disponible para renta</ion-label>
        <ion-toggle formControlName="available"></ion-toggle>
      </ion-item>

      <!-- Subida de Imágenes -->
      <ion-item>
        <ion-label>Imágenes del Producto</ion-label>
        <input type="file" accept="image/*" multiple (change)="onImageChange($event)" #fileInput hidden>
        <ion-button fill="clear" (click)="fileInput.click()">
          <ion-icon name="image" slot="start"></ion-icon>
          Seleccionar Imágenes
        </ion-button>
      </ion-item>

      <!-- Vista previa de imágenes -->
      <ion-grid>
        <ion-row>
          <ion-col size="4" *ngFor="let img of previewImages; let i = index">
            <ion-thumbnail>
              <img [src]="img">
              <ion-fab-button size="small" (click)="removeImage(i)">
                <ion-icon name="close"></ion-icon>
              </ion-fab-button>
            </ion-thumbnail>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-list>
  </form>
</ion-content>